<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harry Potter - Primeras Páginas</title>
    <!-- Incluir Bootstrap -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 20px;
        }
        .search-results {
            margin-top: 20px;
        }
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <!-- Barra de navegación -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Harry Potter</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Inicio</a>
                </li>
            </ul>
            <!-- Buscador en la barra de navegación -->
            <form class="form-inline my-2 my-lg-0" id="searchForm">
                <input class="form-control mr-sm-2" type="search" placeholder="Buscar palabra" aria-label="Search" id="searchInput">
                <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Buscar</button>
            </form>
        </div>
    </nav>

    <div class="container">
        <h1 class="text-center">Capítulo 1: El niño que vivió</h1>
        <p>Estas son las primeras páginas del libro de *Harry Potter* (texto de ejemplo).</p>

        <!-- Texto del Capítulo 1 -->
        <div id="textContent">
            <p id="page1">El señor y la señora Dursley, que vivían en el número 4 de Privet Drive, estaban orgullosos de decir que eran muy normales, afortunadamente. Eran las últimas personas que se esperaría encontrar relacionadas con algo extraño o misterioso, porque no estaban para tales tonterías.</p>
            <p id="page2">El señor Dursley era el director de una empresa llamada Grunnings, que fabricaba taladros. Era un hombre corpulento y rollizo, casi sin cuello, aunque con un bigote inmenso. La señora Dursley era delgada, rubia y tenía un cuello casi el doble de largo de lo habitual, lo que le resultaba muy útil, ya que pasaba la mayor parte del tiempo estirándolo por encima de la valla de los jardines para espiar a sus vecinos. Los Dursley tenían un hijo pequeño llamado Dudley, y para ellos no había un niño mejor que él.</p>
            <p id="page3">Los Dursley tenían todo lo que querían, pero también tenían un secreto, y su mayor temor era que lo descubriesen: no habrían soportado que se supiera lo de los Potter.</p>
            <p id="page4">La señora Potter era hermana de la señora Dursley, pero no se veían desde hacía años; tanto era así que la señora Dursley fingía que no tenía hermana, porque su hermana y su marido, un completo inútil, eran lo más opuesto a los Dursley que se pudiera imaginar. Los Dursley se estremecían al pensar qué dirían los vecinos si los Potter apareciesen por la acera. Sabían que los Potter también tenían un hijo pequeño, pero nunca lo habían visto. El niño era otra buena razón para mantener alejados a los Potter: no querían que Dudley se juntara con un niño como aquél.</p>
            <p id="page5">Nuestra historia comienza cuando el señor y la señora Dursley se despertaron un martes, con un cielo cubierto de nubes grises que amenazaban tormenta. Pero nada había en aquel nublado cielo que sugiriera los acontecimientos extraños y misteriosos que poco después tendrían lugar en toda la región. El señor Dursley canturreaba mientras se ponía su corbata más sosa para ir al trabajo, y la señora Dursley parloteaba alegremente mientras instalaba al ruidoso Dudley en la silla alta.</p>
            <p id="page6">Ninguno vio la gran lechuza parda que pasaba volando por la ventana. A las ocho y media, el señor Dursley cogió su maletín, besó a la señora Dursley en la mejilla y trató de despedirse de Dudley con un beso, aunque no pudo, ya que el niño tenía un berrinche y estaba arrojando los cereales contra las paredes. «Tunante», dijo entre dientes el señor Dursley mientras salía de la casa. Se metió en su coche y se alejó del número 4.</p>
            <p id="page7">Al llegar a la esquina percibió el primer indicio de que sucedía algo raro: un gato estaba mirando un plano de la ciudad. Durante un segundo, el señor Dursley no se dio cuenta de lo que había visto, pero luego volvió la cabeza para mirar otra vez. Sí había un gato atigrado en la esquina de Privet Drive, pero no vio ningún plano. ¿En qué había estado pensando? Debía de haber sido una ilusión óptica. El señor Dursley parpadeó y contempló al gato. Éste le devolvió la mirada. Mientras el señor Dursley daba la vuelta a la esquina y subía por la calle, observó al gato por el espejo retrovisor: en aquel momento el felino estaba leyendo el rótulo que decía «Privet Drive» (no podía ser, los gatos no saben leer los rótulos ni los planos).</p>
            <p id="page8">El señor Dursley meneó la cabeza y alejó al gato de sus pensamientos. Mientras iba a la ciudad en coche no pensó más que en los pedidos de taladros que esperaba conseguir aquel día. Pero en las afueras ocurrió algo que apartó los taladros de su mente. Mientras esperaba en el habitual embotellamiento matutino, no pudo dejar de advertir una gran cantidad de gente vestida de forma extraña. Individuos con capa. El señor Dursley no soportaba a la gente que llevaba ropa ridícula. ¡Ah, los conjuntos que llevaban los jóvenes! Supuso que debía de ser una moda nueva.</p>
            <p id="page9">Tamborileó con los dedos sobre el volante y su mirada se posó en unos extraños que estaban cerca de él. Cuchicheaban entre sí, muy excitados. El señor Dursley se enfureció al darse cuenta de que dos de los desconocidos no eran jóvenes. Vamos, uno era incluso mayor que él, ¡y vestía una capa verde esmeralda! ¡Qué valor! Pero entonces se le ocurrió que debía de ser alguna tontería publicitaria; era evidente que aquella gente hacía una colecta para algo. Sí, tenía que ser eso. El tráfico avanzó y, unos minutos más tarde, el señor Dursley llegó al aparcamiento de Grunnings, pensando nuevamente en los taladros.</p>
            <p id="page10">El señor Dursley siempre se sentaba de espaldas a la ventana, en su oficina del noveno piso. Si no lo hubiera hecho así, aquella mañana le habría costado concentrarse en los taladros. No vio las lechuzas que volaban en pleno día, aunque en la calle sí que las veían y las señalaban con la boca abierta, mientras las aves desfilaban una tras otra. La mayoría de aquellas personas no había visto una lechuza ni siquiera de noche. Sin embargo, el señor Dursley tuvo una mañana perfectamente normal, sin lechuzas. Gritó a cinco personas. Hizo llamadas telefónicas importantes y volvió a gritar. Estuvo de muy buen humor hasta la hora de la comida, cuando decidió estirar las piernas y dirigirse a la panadería que estaba en la acera de enfrente.</p>
        </div>

        <!-- Resultados de la búsqueda -->
        <div class="search-results">
            <h4>Resultados de búsqueda:</h4>
            <div id="searchResults">
                <!-- Aquí aparecerán los resultados de la búsqueda -->
            </div>
        </div>
    </div>

    <!-- Script para buscar palabras en el texto -->
    <script>
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();  // Evitar el comportamiento por defecto del formulario
            const query = document.getElementById('searchInput').value.toLowerCase();
            const textContent = document.getElementById('textContent');
            const paragraphs = textContent.getElementsByTagName('p');
            const searchResults = document.getElementById('searchResults');

            // Limpiar resultados previos
            searchResults.innerHTML = '';
            // Remover resaltado previo
            Array.from(paragraphs).forEach(p => {
                p.innerHTML = p.innerHTML.replace(/<span class="highlight">/g, "").replace(/<\/span>/g, "");
            });

            if(query) {
                let matchCount = 0;
                Array.from(paragraphs).forEach((p, index) => {
                    const regex = new RegExp(`(${query})`, 'gi');
                    const matches = p.innerHTML.match(regex);

                    if (matches) {
                        matchCount += matches.length;
                        // Resaltar la palabra en el texto
                        p.innerHTML = p.innerHTML.replace(regex, '<span class="highlight">$1</span>');
                        // Mostrar los resultados de la búsqueda
                        if (matchCount === matches.length) {
                            searchResults.innerHTML = `<p>Se encontraron <strong>${matchCount}</strong> coincidencias para la palabra "<strong>${query}</strong>".</p>`;
                        }
                    }
                });

                // Si hay resultados, desplazarse a la primera coincidencia
                if (matchCount > 0) {
                    const firstHighlighted = document.querySelector('.highlight');
                    firstHighlighted.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    searchResults.innerHTML = `<p>No se encontraron coincidencias para la palabra "<strong>${query}</strong>".</p>`;
                }
            } else {
                searchResults.innerHTML = '';
            }
        });
    </script>

</body>
</html>
